<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>POST - Batch 22</title>
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ“˜</text></svg>">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
</head>

<body>

    <ul class="nav py-3 justify-content-center">
        <li class="nav-item">
            <a class="nav-link" href="index.html">Mostrar</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="add_form.html">Agregar</a>
        </li>
    </ul>

    <section class="container mt-2" style="height: 80vh;">
        <div class="row h-100 d-flex justify-content-center align-items-center">
            <div class="col-12 col-md-6">
                <div id="alert"></div>
                <form id="formDiary">
                    <div class="mb-3">
                        <label class="form-label">Fecha</label>
                        <input type="date" class="form-control" name="date" required>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Â¿CÃ³mo te sientes?</label>
                        <input type="text" class="form-control" name="feel" required>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">DescripciÃ³n</label>
                        <textarea type="text" class="form-control" name="description" required></textarea>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">URL Imagen</label>
                        <input type="text" class="form-control" name="url_image" required>
                    </div>
                    <button type="submit" class="btn btn-primary w-100">Guardar</button>
                </form>
            </div>
        </div>
    </section>
    
    <script>
        
        const form  = document.querySelector('#formDiary'),
              alert = document.querySelector('#alert');

        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            const formData = new FormData(form);
            const jsonObject = Object.fromEntries(formData);

            try {
                const response = await fetch('https://backend-batch22.herokuapp.com/', {
                    method: 'POST',
                    body: JSON.stringify(jsonObject),
                    headers: {
                        'Content-Type': 'application/json'
                    },
                });

                form.reset();
                window.alert('Agregado correctamente... ðŸ˜‰');
                return await response.json();
                
            } catch (error) {
                console.log(error);
            }

        });

    </script>
</body>

</html>